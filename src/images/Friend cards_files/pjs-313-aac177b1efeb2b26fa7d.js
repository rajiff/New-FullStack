webpackJsonp([313],{x5Tu:function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"UnauthBannerSignupModal",function(){return C});var r=n("d6ZO"),s=n.n(r),l=n("FqaO"),d=n("/2tF"),c=n("gVmS"),p=n("W/Cr"),u=n("IaRT"),h=n.n(u),b=n("85jk"),g=n("bUn+"),y=n("5fX2"),f=n("qMeI"),S=n("ok+N"),B=n("XELL"),_=n("gEaE"),m={container:{background:"rgba(0,0,0,0.65)",transition:"height 0.5s cubic-bezier(0.26, 0.87, 0.74, 0.93)",WebkitTransition:"height 0.5s cubic-bezier(0.26, 0.87, 0.74, 0.93)",WebkitBackfaceVisibility:"hidden"},hybridContainer:{background:"rgba(0,0,0,0.65)",transition:"width 0.42s ease-in-out",width:"100%",right:"0px"},visible:{WebkitTransition:"opacity 0.5s linear",transition:"opacity 0.5s linear",display:"block",opacity:1},closeButton:{backgroundColor:"Transparent",backgroundRepeat:"no-repeat",border:"none",outline:"none",overflow:"hidden",padding:"10px",position:"fixed",right:"24px",top:"24px"},tieredVisible:{WebkitTransition:"opacity 0.5s linear",transition:"opacity 0.5s linear",visibility:"visible",opacity:1,height:"100%",display:"flex"},tieredVisibleWithScroll:{WebkitTransition:"opacity 0.5s linear",transition:"opacity 0.5s linear",visibility:"visible",opacity:1,height:"100%",display:"flex",overflow:"scroll"},hidden:{WebkitTransition:"opacity 0.5s linear",transition:"opacity 0.5s linear",pointerEvents:"none",display:"none",opacity:0},tieredHidden:{WebkitTransition:"opacity 0.5s linear",transition:"opacity 0.5s linear",pointerEvents:"none",visibility:"hidden",opacity:0,height:"0"},noBanner:{bottom:"0px",color:"#fff",height:"0px",position:"fixed",width:"100%"},hybridNoBanner:{bottom:"0px",color:"#fff",height:"100%",position:"fixed",width:"0px"},quarterScreenBanner:{background:"rgba(85, 85, 85, 1)",bottom:"0px",color:"#fff",height:"64px",position:"fixed",width:"100%"},fullScreenBanner:{bottom:"0px",color:"#fff",height:"100%",position:"fixed",left:"0px",width:"100%"},hybridSideBarOnly:{height:"100%",width:"376px",bottom:"0px",position:"fixed",background:"rgba(0,0,0,0)"},textAndButtonsContainer:{justifyContent:"space-between",MozJustifyContent:"space-between",WebkitJustifyContent:"space-between",height:"64px",width:"100%",alignItems:"center",display:"flex"},title:{color:"#fff",display:"inline-block",fontSize:"24px",fontWeight:"500",verticalAlign:"middle",fontStyle:"normal",fontStretch:"normal",lineHeight:"normal",textAlign:"left"},signupButton:{display:"inline-block",height:"44px",lineHeight:"36px",padding:"0px 14px",fontSize:"16px",minWidth:"128px",marginTop:"0px",marginRight:"5px",whiteSpace:"nowrap"},LoginButton:{backgroundColor:"transparent",border:"solid 1px #ffffff",display:"inline-block",height:"44px",lineHeight:"36px",padding:"0px 14px",fontSize:"16px",minWidth:"128px",marginTop:"0px"},fullPageSignup:{left:"50%",top:"50%",position:"absolute",transform:"translate(-50%, -50%)"},tieredFullPageSignup:{left:"50%",top:"50%",visibility:"visible",opacity:1,transition:"opacity 0.5s linear",margin:"auto"},tieredFullPageSignupHidden:{pointerEvents:"none",visibility:"hidden",opacity:0},hybridFullPageSignup:{height:"100%",width:"100%",right:"0px",position:"absolute"}},x=27,C=function(e){function t(n){i(this,t);var o=a(this,e.call(this,n));return o.getBannerState=function(){return"enabled_all"===o.activateHybridSideBarExp()?"dismissable":"enabled_banner"===o.activateHybridSideBarExp()?"nondismissable":o.activateHybridSideBarExp().startsWith("enabled_side_bar")?"dismissed":null},o.getModalType=function(){return o.props.signupSource===B.a.login?B.b.login:B.b.signupOrPersonalizedLogin},o.handleCancelClick=function(){o.dismissBanner(),o.dismissBrandUpsellFlyout(),Object(b.a)("unauth_hybrid_side_bar_closed.cancelButtonClick")},o.handleCloseButtonClick=function(){var e=o.getModalType();Object(b.a)("unauth.authentication_modal.x_button_click.NOT_NOW_BUTTON."+e),o.props.canClose&&o.activateDismissActionExp().startsWith("enabled")&&o.props.handleDismissSignupModal()},o.handleCloseClick=function(){o.props.canClose&&o.props.handleDismissSignupModal()},o.handleContentClick=function(e){e.stopPropagation()},o.handleContentKeyDown=function(e){if(e.keyCode===x){var t=o.getModalType();Object(b.a)("unauth.authentication_modal.esc_key_click.NOT_NOW_BUTTON."+t)}},o.handleEmptySpaceClick=function(){Object(b.a)("unauth.unauth_banner_signup_modal.default.empty_space_click"),o.props.canClose&&(o.activateDismissActionExp().includes("wash")||o.activateDismissActionExp().startsWith("enabled_all")||o.activateDismissActionExp().startsWith("enabled_new_all"))&&o.props.handleDismissSignupModal()},o._handleLoginClick=function(){o.track("login"),o.props.onLoginClick()},o._handleSignupClick=function(){o.track("signup"),o.props.onSignupClick()},o.track=function(e){Object(b.a)("unauth_hybrid_banner."+e)},o.dismissBanner=function(){o.setState({bannerState:"dismissed"})},o.dismissBrandUpsellFlyout=function(){o.setState({showBrandUpsellFlyout:!1,showCancelButton:!1})},o.activateHybridSideBarExp=function(){return o.props.seoUnauthExperiments.v2ActivateExperiment("unauth_hybrid_side_bar_closed")||""},o.activateDismissActionExp=function(){var e="seo_unauth_dismiss_modal_actions_2",t=o.props.seoExperiments.active[e];return t||(o.props.seoUnauthExperiments.v2ActivateExperiment("unauth_dismiss_modal_actions_2")||"")},o.inBrandUpsellExpGroup=function(){return"enabled_all"===o.activateHybridSideBarExp()||"enabled_side_bar_and_bubble"===o.activateHybridSideBarExp()},o.state={showBrandUpsellFlyout:o.props.showBrandUpsellFlyout||o.inBrandUpsellExpGroup(),showCancelButton:"enabled_all"===o.activateHybridSideBarExp(),bannerState:o.getBannerState()},o.handleSignupClick=o._handleSignupClick.bind(o),o.handleLoginClick=o._handleLoginClick.bind(o),o}return o(t,e),t.prototype.UNSAFE_componentWillReceiveProps=function e(t){if("enabled_all"===this.activateHybridSideBarExp()&&!0===t.showNonDismissibleBanner&&!1===this.props.showNonDismissibleBanner&&this.inBrandUpsellExpGroup()&&this.setState({bannerState:"nondismissable",showBrandUpsellFlyout:!0,showCancelButton:!1}),this.props.bannerSize!==f.a.FULL_SCREEN_BANNER&&t.bannerSize===f.a.FULL_SCREEN_BANNER&&!l.get("hasBeenShownLoginModalInOpen")){var n=this.getModalType(),i=this.props.hybridTier;Object(b.a)("unauth_web_container."+c.a.INSPIRED_BANNER+"."+i+n+".shown")}this.props.bannerSize===f.a.FULL_SCREEN_BANNER&&t.bannerSize===f.a.QUARTER_SCREEN_BANNER&&(g.a.logLoginSignupModalView(),l.get("hasBeenShownLoginModalInOpen")||l.set("hasBeenShownLoginModalInOpen","true",12))},t.prototype.getContainerStyles=function e(t){switch(t){case"quarterScreenBanner":return Object.assign({},m.container,m.quarterScreenBanner);case"fullScreenBanner":return"nondismissable"===this.state.bannerState||"dismissable"===this.state.bannerState?Object.assign({},m.hybridContainer,m.fullScreenBanner):"dismissed"===this.state.bannerState?Object.assign({},m.hybridContainer,m.hybridSideBarOnly):Object.assign({},m.container,m.fullScreenBanner);default:return this.state.bannerState?Object.assign({},m.container,m.hybridNoBanner):Object.assign({},m.container,m.noBanner)}},t.prototype.stringsToTranslate=function e(){p.a._("Log in","Text on the button on the bottom banner that leads unauthorized users to login.")},t.prototype.shouldRenderCloseButton=function e(){return this.props.canClose&&(this.activateDismissActionExp().includes("x")||this.activateDismissActionExp().startsWith("enabled_all"))},t.prototype.renderCloseButton=function e(){return s.a.createElement("button",{"aria-label":p.a._("close","accessible label for close button"),onClick:this.handleCloseButtonClick,style:m.closeButton},s.a.createElement(_.m,{accessibilityLabel:p.a._("close","accessible label for close button"),color:"white",icon:"cancel",inline:!0}))},t.prototype.renderLoginSignupButtons=function e(){return s.a.createElement(_.b,{display:"flex",justifyContent:"between",padding:2},s.a.createElement(d.a,{className:"white",onClick:this.handleSignupClick,styleOverrides:m.signupButton},p.a._("Sign up","sign up button on the bottom banner")),s.a.createElement(d.a,{className:"darkGrey",onClick:this.handleLoginClick,styleOverrides:m.LoginButton},p.a._("Log in","word in the log in button")))},t.prototype.render=function e(){var t=this.props,n=t.bannerSize,i=t.fullPageSignup,a=t.inTierMarket,o=i,r=this.activateHybridSideBarExp(),l=this.getContainerStyles(n),d="quarterScreenBanner"===n?m.visible:m.hidden,u="fullScreenBanner"===n?m.visible:m.hidden;a&&(d="quarterScreenBanner"===n?m.tieredVisible:m.tieredHidden,u="fullScreenBanner"===n?m.tieredVisibleWithScroll:m.tieredHidden);var h=this.getModalType(),b=m.fullPageSignup;a&&(b="fullScreenBanner"!==n?m.tieredFullPageSignupHidden:m.tieredFullPageSignup),"enabled_side_bar_and_bubble"===r||"enabled_side_bar"===r?b=m.hybridFullPageSignup:r.startsWith("enabled")&&(b=Object.assign({},m.hybridFullPageSignup,{width:"376px"}));var g=r.startsWith("enabled");return s.a.createElement("div",{"data-test-id":"giftWrap",style:l},s.a.createElement("div",{"data-test-id":"quarterBanner",className:"gridCentered",style:d},s.a.createElement("div",{className:"UnauthBanner__textAndButtonsContainer",style:m.textAndButtonsContainer},s.a.createElement("div",{style:m.title},p.a._("Explore more ideas with a Pinterest account","value prop on the bottom banner")),this.renderLoginSignupButtons())),s.a.createElement("div",{"data-test-id":"fullBanner",style:u,onClick:this.handleEmptySpaceClick,role:"dialog"},s.a.createElement("div",{style:b,onClick:this.handleContentClick,onKeyDown:this.handleContentKeyDown,role:"dialog"},s.a.createElement(o,{toggleType:this.props.toggleType,container:c.a.INSPIRED_BANNER,darkSignupTitle:!0,handleBrandUpsellClick:this.props.handleBrandUpsellClick,handleCancelClick:this.handleCancelClick,handleCloseClick:this.handleCloseClick,showBrandUpsellFlyout:this.props.showBrandUpsellFlyout,showCancelButton:this.state.showCancelButton,hybridSideBar:g,signupSource:this.props.signupSource,type:h,disablePersonalizedLoginActivation:!0}),this.shouldRenderCloseButton()?this.renderCloseButton():null)))},t}(r.Component);t.default=Object(y.a)(Object(S.b)(C))}});