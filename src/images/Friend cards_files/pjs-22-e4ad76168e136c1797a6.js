webpackJsonp([22],{"6szS":function(e,t,r){"use strict";function a(e){return function(t){o.a.create("TypeaheadClearRecentResource",{query:e}).callDelete().then(function(){return t(i())})}}function n(e){return{type:"UPDATE_SKIN_TONE_FILTER_QUERY_USES",payload:{newQuery:e}}}t.a=a,t.b=n;var s=r("ZtCB"),o=r.n(s),c=r("S+Qs"),i=function e(){return Object(c.a)("AdvancedTypeaheadResource",{term:"",pin_scope:"pins"})}},CiuA:function(e,t,r){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),r.d(t,"SearchTypeahead",function(){return x});var o=r("d6ZO"),c=r.n(o),i=r("DUIN"),l=r("tQ0j"),u=r.n(l),p=r("GGB8"),h=r.n(p),m=r("W/Cr"),d=r("IaRT"),f=r.n(d),y=r("nX0T"),g=r("skut"),b=r("+kCg"),_=r("JyNp"),E=r("i0Ug"),v=r("6oz1"),S=r("suNN"),R=r("6szS"),T=r("gEaE"),O=r("MQ2h"),w=r.n(O),I={BOARD:"board",QUERY:"query",RECENT:"recent_query",RECOMMENDED:"recommended_query",TRENDING:"trending",USER:"user",NEW_RECIPE:"new_recipe",NEW_DECOR:"new_decor",NEW_STYLE:"new_style"},C=38,N=function e(t){var r=t.children;return c.a.createElement(T.b,{flex:"none",height:38,marginRight:2,width:38},r)},x=function(e){function t(){var r,s,o;a(this,t);for(var i=arguments.length,l=Array(i),u=0;u<i;u++)l[u]=arguments[u];return r=s=n(this,e.call.apply(e,[this].concat(l))),s.handleOnClickItem=function(e){var t=s.props;(0,t.onTypeaheadItemSelected)(e,t.value)},s.renderLabelAndSubLabel=function(e){var t=e.label,r=e.subLabel,a=e.verified,n=void 0!==a&&a;return c.a.createElement(T.b,{overflow:"hidden"},c.a.createElement(T.b,{alignItems:"center",display:"flex"},c.a.createElement(T.b,{flex:"grow"},c.a.createElement(T.J,{bold:!0,truncate:!0},t)),n&&c.a.createElement(T.b,{display:"inlineBlock",flex:"none",marginLeft:1},c.a.createElement(T.m,{accessibilityLabel:m.a._("Verified user icon","Accessibility label for verified icon"),color:"red",icon:"check-circle",size:14}))),r&&c.a.createElement(T.b,{marginTop:1},c.a.createElement(T.J,{size:"xs",truncate:!0},r)))},s.renderSearchAllInScopeText=function(e){return c.a.createElement(T.J,{bold:!0,truncate:!0},e)},o=r,n(s,o)}return s(t,e),t.prototype.UNSAFE_componentWillReceiveProps=function e(t){var r=this.props,a=r.emptySuggestions,n=r.updateEmptySuggestions;t.emptySuggestions&&a!==t.emptySuggestions&&n(t.emptySuggestions),b.b.mark("visible_progress_elapsed_ms",null)},t.prototype.getTypeaheadGroupTitle=function e(t){switch(t){case I.USER:return m.a._("People");case I.BOARD:return m.a._("Boards");case I.RECENT:return m.a._("Recent searches");case I.RECOMMENDED:return m.a._("Ideas for you");case I.TRENDING:return m.a._("Trending ideas");case I.NEW_RECIPE:return m.a._("Make a new recipe");case I.NEW_DECOR:return m.a._("Spruce up your space");case I.NEW_STYLE:return m.a._("Discover your style");default:return null}},t.prototype.getGroupedResults=function e(t){return u.a.groupBy(t,function(e){return e.type})},t.prototype.renderTypeaheadGroupHeader=function e(t){var r=this.getTypeaheadGroupTitle(t);return r&&c.a.createElement("a",{className:"titleItem",style:{cursor:"default",backgroundColor:"inherit"}},c.a.createElement(T.J,{truncate:!0,size:"xs"},r))},t.prototype.renderTypeaheadGroupItem=function e(t,r){var a=this,n=this.props.typeaheadSuggestionsQuery,s={backgroundColor:r?"#f1f1f1":"inherit",color:t.color?t.color:""};switch(t.type){case I.QUERY:var o=n.toLowerCase(),i="",l="";return t.label.startsWith(o)?(i=o,l=t.label.slice(o.length)):l=t.label,c.a.createElement("a",{"data-test-id":"search-suggestion",style:s},c.a.createElement(v.b,{name:"typeahead_bold_suffix_web"},function(e){var t=e.group;return"enabled2_emphasize_prefix"===t?c.a.createElement(T.J,{truncate:!0},c.a.createElement(T.J,{bold:!0,inline:!0},i),c.a.createElement(T.J,{bold:!0,color:"gray",inline:!0},l)):["employees","enabled2_emphasize_suffix"].includes(t)?c.a.createElement(T.J,{truncate:!0},c.a.createElement(T.J,{bold:!0,color:"gray",inline:!0},i),c.a.createElement(T.J,{bold:!0,inline:!0},l)):c.a.createElement(T.J,{truncate:!0},c.a.createElement(T.J,{bold:!0,inline:!0},i),c.a.createElement(T.J,{inline:!0},l))}));case I.USER:return t.searchAllInScope?c.a.createElement("a",{className:"user",style:s},this.renderSearchAllInScopeText(Object(S.b)(m.a._('Pinners named "{{ searchText }}"',"See all Pinner results for a search query"),{searchText:n}))):c.a.createElement("a",{className:"user",style:s},c.a.createElement(T.b,{alignItems:"center",display:"flex"},c.a.createElement(N,null,c.a.createElement(T.a,{name:t.label,src:t.image_medium_url||t.image_small_url})),this.renderLabelAndSubLabel(t)));case I.BOARD:return t.searchAllInScope?c.a.createElement("a",{className:"board",style:s},this.renderSearchAllInScopeText(Object(S.b)(m.a._('Boards called "{{ searchText }}"',"See all Board results for a search query"),{searchText:n}))):c.a.createElement("a",{className:"board",style:s},c.a.createElement(T.b,{alignItems:"center",display:"flex"},c.a.createElement(N,null,c.a.createElement(T.t,{shape:"rounded",height:38},t.board_thumb_url?c.a.createElement(T.o,{alt:t.label,fit:"cover",naturalHeight:38,naturalWidth:38,src:t.board_thumb_url}):c.a.createElement(T.b,{color:"lightGray",width:38,height:38}))),this.renderLabelAndSubLabel(t)));case I.RECENT:return c.a.createElement("a",{className:"recentQuery",style:s},c.a.createElement(T.b,{alignItems:"center",display:"flex"},c.a.createElement(T.b,{flex:"grow"},c.a.createElement(T.J,{bold:!0,truncate:!0},t.label)),c.a.createElement(T.b,{display:r?"block":"none",flex:"none",marginBottom:-1,marginTop:-1},c.a.createElement(T.n,{accessibilityLabel:m.a._("Remove","Remove recent search in search typeahead suggestion"),icon:"cancel",onClick:function e(r){var n=r.event;n.stopPropagation(),n.preventDefault(),a.props.removeRecentQuery(t.query)},size:"xs"}))));case I.RECOMMENDED:case I.TRENDING:case I.NEW_RECIPE:case I.NEW_DECOR:case I.NEW_STYLE:return c.a.createElement("a",{className:t.class_name,style:s},c.a.createElement(T.J,{bold:!0,truncate:!0},t.label));default:return null}},t.prototype.renderTypeaheadGroup=function e(t,r,a){var n=this,s=this.props,o=s.hoveredItemIndex,i=s.onHoverItem,l=this.renderTypeaheadGroupHeader(t);return[].concat(l&&[c.a.createElement("li",{key:"group-"+t+"-header",onMouseDown:function e(t){t.preventDefault()}},l)]||[],r.map(function(e,r){var s=a+r;return c.a.createElement("li",{"aria-selected":s===o,key:"group-"+t+"-"+(e.url||r),onBlur:function e(){},onClick:function t(r){r.stopPropagation(),n.handleOnClickItem(e)},onFocus:function e(){return i(s)},onMouseDown:function e(t){t.preventDefault()},onMouseOut:function e(t){t.preventDefault()},onMouseOver:function e(){return i(s)},role:"option"},n.renderTypeaheadGroupItem(e,s===o))}))},t.prototype.render=function e(){var t=this,r=this.props,a=r.className,n=r.emptySuggestions,s=r.emptySuggestionsOverride,o=r.focused,i=r.maxHeight,l=r.onTypeaheadMouseOut,u=r.onTypeaheadSuggestionsChange,p=r.pinScope,m=r.typeaheadSuggestions,d=r.value,f=null;if(o){var b=c.a.createElement("div",null),_=!d&&(s||n)||m,E=this.getGroupedResults(_),v=i?{maxHeight:i,overflowY:"auto"}:null,S=Object.keys(E).reduce(function(e,r){var a=e.listItems,n=e.globalIndexOffset;return{listItems:[].concat(a,t.renderTypeaheadGroup(r,E[r],n)),globalIndexOffset:n+E[r].length}},{listItems:[],globalIndexOffset:0}).listItems;S&&S.length&&(b=c.a.createElement("div",{className:h()(a,"open","Typeahead","typeaheadWithTitles")},c.a.createElement("ul",{className:"results","data-test-id":"typeaheadResults",onBlur:l,onMouseOut:l,style:v,role:"listbox"},S))),f=c.a.createElement(y.a,{view:2,viewParameter:103},b)}return c.a.createElement(g.a,{onTypeaheadSuggestionsChange:u,resourceName:"AdvancedTypeaheadResource",resourceOptions:{pin_scope:p},allowSearchOnMount:!0,value:d},f)},t}(o.Component);t.default=Object(O.compose)(E.a,Object(_.c)({name:"AdvancedTypeaheadResource",key:"emptySuggestionsResource",options:function e(t){return{term:"",pin_scope:t.pinScope}}},{allowStale:!1}),Object(_.c)({name:"RecommendedQueriesResource",key:"recommendedQueriesResource"}),Object(_.c)({name:"TrendingQueriesResource",key:"trendingQueriesResource"}),Object(i.connect)(function(e){return{emptySuggestions:[].concat((e.search.recentQueries||[]).map(function(e,t){var r=e.query;return{class_name:"recentQuery",label:r,query:r,resultIndex:t,type:"recent_query",url:e.url||"/search/pins/?q="+encodeURIComponent(r)+"&rs=rs"}}),e.search.recommendedQueries.map(function(e,t){var r=e.query;return{label:r,query:r,resultIndex:t,type:"recommended_query",url:e.url||"/search/pins/?q="+encodeURIComponent(r)+"&rs=rec"}}),e.search.trendingQueries.map(function(e,t){var r=e.query;return{label:r,query:r,resultIndex:t,type:"trending",url:e.url||"/search/pins/?q="+encodeURIComponent(r)+"&rs=trending"}}))}},function(e){return{removeRecentQuery:function t(r){return e(Object(R.a)(r))}}}))(x)},"j1/O":function(e,t,r){"use strict";var a=r("hlP+"),n=r.n(a),s=r("g1tx"),o=r("ZtCB"),c=r.n(o),i=r("MSpZ"),l=r("EAiy"),u=5,p=i.a.findHandlerByName("search_autocomplete_render"),h=function e(t){t=t||{},this.tags=t.tags,this.enable_recent_queries=!!t.enable_recent_queries,this.minimum_term_character_length=t.minimum_term_character_length||0,this.bypass_lru_cache=t.bypass_lru_cache;var r={tags:t.tags,pin:t.pin_id},a=t.num_places;a?r.num_places=a:r.count="count"in t?t.count:5,t.exclude_non_followers&&(r.exclude_non_followers=!0),t.field_set_key&&(r.field_set_key=t.field_set_key),t.pin_scope&&(r.pin_scope=t.pin_scope);var n="TypeaheadResource";t.resource_name&&(n=t.resource_name),this.searchResource=c.a.create(n,r),this.itemsCache=new s.a};Object.assign(h.prototype,n.a),Object.assign(h.prototype,{search:function e(t,r){var a=void 0;if(!t&&"pinners_and_contacts"===this.tags)return this.abortSearch(),this.publishData(t,[],{},r);if(!t&&l.a.isLimitedLogin())return this.abortSearch(),this.publishData(t,[],{},r);if(!t&&this.enable_recent_queries&&l.a&&l.a.isAuthenticated())a="recent_search";else{var n=this.bypass_lru_cache?{}:this.itemsCache.get(t);if(n){var s=n.items;if(s&&s.length){this.abortSearch();var o=n.hint;return void this.publishData(t,s,o,r)}}}t.length>=this.minimum_term_character_length?this.fetch(t,a,r):this.publishData(t,[],{},r)},getResource:function e(){return this.searchResource},abortSearch:function e(){this.trigger("typeaheadSearchAbort"),this.getResource().abort()},publishData:function e(t,r,a,n){var s={term:t,items:r,hint:a};this.trigger("data",s),n&&n(s)},setAutocompleteScope:function e(t){this.getResource().set("autocompleteScope",t)},fetch:function e(t,r,a){var n=this,s=null,o=null;p&&p.hasActiveStopwatch()&&(s=p._currTraceId,o=p._currTimer&&p._currTimer.spanId);var c=this.getResource();if(c.isCalling()){var i=c.get("term");if(t===i)return;this.abortSearch()}""!==this.tags&&(this.trigger("typeaheadSearchStart",t),c.set("term",t),c.set("tags",r||this.tags),c.resetBookmark(),c.callGet({showError:!1,tracingParams:{traceId:s,parentSpanId:o}}).then(function(e){var r=e.resource_response.data,s=r.items,o=r.hint||{},c={hint:o,items:s};n.cacheData(t,c),n.publishData(t,s,o,a)},function(e){n.trigger("fetchError",e)}),this.warm=!0)},removeCacheForTerm:function e(t){this.itemsCache.remove(t)},cacheData:function e(t,r){this.itemsCache.set(t,r)},prefetch:function e(){this.warm||(c.a.create("TypeaheadPrepareResource").callGet({showError:!1}),this.warm=!0)}}),t.a=h},nX0T:function(e,t,r){"use strict";var a=r("d6ZO"),n=r.n(a),s=r("s149"),o=r("gEJd"),c=function e(t){return a.createElement(o.a,Object.assign({},t,{timeSpentManager:s.a}))};t.a=c},skut:function(e,t,r){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=r("d6ZO"),c=r.n(o),i=r("IaRT"),l=r.n(i),u=r("j1/O"),p=function(e){function t(){var r,s,o;a(this,t);for(var c=arguments.length,i=Array(c),l=0;l<c;l++)i[l]=arguments[l];return r=s=n(this,e.call.apply(e,[this].concat(i))),s.searchCache=Object.create(null),s.lastSearchedQuery=null,s.search=function(e){s.lastSearchedQuery=e,e in s.searchCache?s.props.onTypeaheadSuggestionsChange(s.searchCache[e],e):s.provider.search(e,function(t){var r=t.items;s.searchCache[e]=r,e===s.lastSearchedQuery&&s.props.onTypeaheadSuggestionsChange(r,e)})},o=r,n(s,o)}return s(t,e),t.prototype.componentDidMount=function e(){var t=this.props.resourceOptions||{};this.provider=new u.a(Object.assign({resource_name:this.props.resourceName},t));var r=this.props.value;void 0!==r&&null!==r&&this.props.allowSearchOnMount&&this.search(this.props.value)},t.prototype.UNSAFE_componentWillReceiveProps=function e(t){var r=t.value;void 0!==r&&null!==r&&r!==this.props.value&&this.search(r)},t.prototype.render=function e(){return this.props.children||null},t}(o.Component);p.defaultProps={resourceName:"TypeaheadResource"},t.a=p}});